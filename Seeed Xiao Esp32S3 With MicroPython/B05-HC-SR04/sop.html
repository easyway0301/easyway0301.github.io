<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>ESP32-S3 MicroPythonï½œè¶…éŸ³æ³¢æ¸¬è·æ¨¡çµ„ SOPï¼ˆ10 ç§’æ¸¬è©¦ï¼‰</title>

<style>
body {
    font-family: Arial, "Microsoft JhengHei", sans-serif;
    background: #f5f7fa;
    color: #222;
    line-height: 1.9;
    max-width: 980px;
    margin: 40px auto;
    padding: 0 20px;
}

h1 {
    text-align: center;
    margin-bottom: 10px;
}

.subtitle {
    text-align: center;
    color: #555;
    margin-bottom: 50px;
}

section {
    background: #ffffff;
    border-radius: 14px;
    padding: 40px;
    margin-bottom: 50px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.08);
}

h2 {
    margin-top: 0;
    border-left: 6px solid #2196F3;
    padding-left: 14px;
}

.highlight {
    background: #e3f2fd;
    border-left: 6px solid #2196f3;
    padding: 16px 20px;
    border-radius: 8px;
    margin: 20px 0;
}

.code-block {
    background: #0d1117;
    color: #c9d1d9;
    border-radius: 12px;
    padding: 20px;
    margin: 30px 0;
    font-family: Consolas, monospace;
    font-size: 14px;
    overflow-x: auto;
}

pre {
    margin: 0;
}
</style>
</head>

<body>

<h1>ESP32-S3 MicroPython è¶…éŸ³æ³¢æ¸¬è·æ•™å­¸</h1>
<div class="subtitle">HC-SR04 / ç›¸å®¹æ¨¡çµ„ï¼ˆ10 ç§’æ¸¬è©¦ç‰ˆï¼‰</div>

<section>
<h2>ç¬¬ä¸€æ­¥ï¼šæ¨¡çµ„ä»‹ç´¹</h2>

<p>
æœ¬æ•™å­¸ä½¿ç”¨å¸¸è¦‹çš„ <strong>è¶…éŸ³æ³¢æ¸¬è·æ¨¡çµ„ï¼ˆHC-SR04 é¡å‹ï¼‰</strong>ï¼Œ
é€éç™¼å°„èˆ‡æ¥æ”¶è¶…éŸ³æ³¢ï¼Œè¨ˆç®—ç‰©é«”è·é›¢ã€‚
</p>

<div class="highlight">
<strong>æ¨¡çµ„ç‰¹æ€§ï¼š</strong><br>
â€¢ æ¸¬è·ç¯„åœï¼šç´„ 2 cm ï½ 400 cm<br>
â€¢ é€šè¨Šæ–¹å¼ï¼šTRIG / ECHO è…³ä½<br>
â€¢ è¨ˆç®—æ–¹å¼ï¼šè²é€Ÿ Ã— æ™‚é–“ Ã· 2
</div>
</section>

<section>
<h2>ç¬¬äºŒæ­¥ï¼šæ¥ç·šæ–¹å¼ï¼ˆSeeed XIAO ESP32-S3ï¼‰</h2>

<ul>
    <li>VCC â†’ 5Vï¼ˆæˆ–ä¾æ¨¡çµ„éœ€æ±‚ï¼‰</li>
    <li>GND â†’ GND</li>
    <li>TRIG â†’ GPIO 9</li>
    <li>ECHO â†’ GPIO 8</li>
</ul>

<div class="highlight">
âš ï¸ è‹¥æ¨¡çµ„ ECHO ç‚º 5Vï¼Œè«‹ç¢ºèªæ˜¯å¦éœ€è¦åˆ†å£“ä¿è­· ESP32 è…³ä½ã€‚
</div>
</section>

<section>
<h2>ç¬¬ä¸‰æ­¥ï¼šMicroPython ç¯„ä¾‹ï¼ˆä¸ä½¿ç”¨ while è¿´åœˆï¼‰</h2>

<p>
æ­¤ç¨‹å¼<strong>ä¸ä½¿ç”¨ while True</strong>ï¼Œ  
åƒ…é‡æ¸¬ <strong>10 ç§’</strong>ï¼Œæ¯ç§’è¼¸å‡ºä¸€æ¬¡è·é›¢å¾ŒçµæŸã€‚
</p>

<div class="code-block">
<pre><code>
from machine import Pin, time_pulse_us   # åŒ¯å…¥ Pin èˆ‡è„ˆè¡æ¸¬é‡å‡½å¼
import time                              # åŒ¯å…¥æ™‚é–“æ¨¡çµ„

# === è…³ä½è¨­å®š ===
TRIG = Pin(9, Pin.OUT)                   # TRIG è…³ä½ï¼ˆè¼¸å‡ºï¼‰
ECHO = Pin(8, Pin.IN)                    # ECHO è…³ä½ï¼ˆè¼¸å…¥ï¼‰

def get_distance_mm():
    # ç™¼é€ 10 å¾®ç§’çš„è§¸ç™¼è„ˆè¡
    TRIG.value(0)
    time.sleep_us(2)
    TRIG.value(1)
    time.sleep_us(10)
    TRIG.value(0)

    # é‡æ¸¬ ECHO é«˜é›»ä½æ™‚é–“ï¼ˆå¾®ç§’ï¼‰
    duration = time_pulse_us(ECHO, 1, 30000)

    # è‹¥å›å‚³è² å€¼ï¼Œä»£è¡¨æ¸¬é‡å¤±æ•—
    if duration < 0:
        return None

    # è·é›¢è¨ˆç®—ï¼ˆæ¯«ç±³ï¼‰
    distance_mm = (duration * 343) / (2 * 1000)
    return distance_mm

# === é–‹å§‹è¨ˆæ™‚ ===
start_time = time.time()

# === æ¸¬é‡ 10 ç§’ ===
while time.time() - start_time < 10:
    dist_mm = get_distance_mm()

    if dist_mm is not None:
        dist_cm = dist_mm / 10
        print("è·é›¢: {:.2f} cm ({:.2f} mm)".format(dist_cm, dist_mm))
    else:
        print("æ¸¬é‡å¤±æ•—")

    time.sleep(1)                        # æ¯ç§’æ¸¬ä¸€æ¬¡
</code></pre>
</div>
</section>

<section>
<h2>åŸ·è¡Œçµæœ</h2>

<ul>
    <li>æ¯ç§’è¼¸å‡ºä¸€æ¬¡è·é›¢è³‡æ–™</li>
    <li>ç´„ 10 ç§’å¾Œç¨‹å¼è‡ªå‹•çµæŸ</li>
    <li>é©åˆå¿«é€Ÿæ¸¬è©¦æ¨¡çµ„èˆ‡æ¥ç·š</li>
</ul>

<div class="highlight">
ğŸ“Œ æ•™å­¸é‡é»ï¼š<br>
âœ” ä¸ä½¿ç”¨ç„¡é™ while è¿´åœˆ<br>
âœ” é¿å…ç¨‹å¼å¡æ­»<br>
âœ” é©åˆèª²å ‚å±•ç¤ºèˆ‡é™¤éŒ¯
</div>
</section>

</body>
</html>
